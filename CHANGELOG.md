# Changelog

All notable changes to this project will be documented in this file.

## [unreleased]

### 🚀 Features

- 完成基础的包信息解析
- 实现package解析校验
- 实现返回Value的工作流解析器
- 实现正确工作流的解析
- 实现header解析报错提示
- 实现toml解析报错提示
- 实现步骤解析器的报错反馈
- 实现Execute函数
- 增加log模块和单测案例
- 增加中文控制台输出测试
- 实现link
- 使用快捷方式添加path
- 实现Path移除
- 实现条件eval
- 实现工作流执行器，等待解决Path不生效问题
- 为步骤执行器增加解压路径位置
- 使用批处理进行path添加
- 支持步骤自解析located路径
- 实现tar
- 实现zstd
- 实现压缩模块
- 增加blake3
- 实现签名函数
- 实现rsa签名与校验
- 临时实现本地ca
- 实现打包
- Pack时自动推导stem
- 实现uninstall
- 完成install测试
- 通过安装与卸载测试
- 实现cli结构体
- 完成cli绑定
- Debug模式与多彩的log
- 实现控制台覆盖输出
- 实现ok上一条消息
- 完成入口的控制台打印
- 支持离线模式
- 非debug模式清理临时目录
- 实现exe文件版本号读取
- 实现ExSemver结构体
- 实现tostring
- 实现tostring
- 新增使用方法
- 提供绝对路径解析器
- 替换绝对路径解析
- Ok日志支持自动识别上条内容
- 实现parse pkg时动态读取exe版本号
- 支持添加目录到path
- 聚合./apps
- 聚合./temp
- 聚合所有./
- 增加逆向步骤
- 增加逆向工作流执行器
- 允许不存在remove.toml
- 复用解包能力
- 实现作者解析
- 实现author解析器
- 实现update
- 通过腐败包攻击测试
- 实现确认模式
- 测试绝对路径的主程序更新
- 打包时检查目录纯净性
- 增加对32位程序的版本号读取
- 支持可选的主程序字段
- 打包时校验setup工作流
- 实现严格模式
- 改用TStep特性
- 恢复分散的match风格代码
- 聚合match
- 使用宏定义step枚举
- 完全使用宏聚合重复的枚举定义
- 实现p2s宏
- Add benchmark
- 实现unpack nep分流
- 优化debug模式
- 支持在卸载时杀进程
- 切换到ed25519签名算法
- 完善进程控制
- 增加path变量更新后的全局广播
- 增加scope特性，未经验证
- 完成scope测试
- 卸载时删除空的 scope
- 增加clean命令
- 增加3个新字段
- 增加 Verifiable 特性和 verify_enum 宏
- 为所有步骤实现Verifiable
- 实现cfg
- 接入cfg读取
- 增加Generalizable
- 为Step枚举实现两个新特性
- 增加MixedFS
- 增加一批路径，规范反斜杠与./
- 新增内置变量，完善变量解释器
- 装箱单检查引入MixedFS和变量检查器
- 新增路径校验规则
- 实现路径校验器
- 完善校验规则
- 支持Path的alias参数
- 交付Path新需求
- 优化path运行
- 实现Link操作开始菜单
- Link支持参数和图标
- 支持WorkflowHeader提取权限信息
- 使用Mutex收集权限
- 实现Header校验
- 分离出单独的verify入口
- 实现校验Package
- 支持在离线模式下识别开发目录
- 增加meta入口
- 新增两个内置函数
- 改用工作流上下文传递信息
- 为多个步骤接入通用路径校验
- 实现copy权限
- 适配通配符改造
- 增加Copy单测
- 初步增强mixedfs
- 增加mixedfs原子操作
- 遇到新增FS步骤时仅对manifest错误进行警告
- 增加move步骤
- 增加rename步骤
- 增加rename单测案例
- 新增new
- 新增wait
- 去掉单测的绝对路径
- 完善move单测案例
- 完善new单测案例
- 增加toast
- 增加delete
- 为覆盖增加warning
- 增加kill
- 完成meta单测
- 将var_warn_manifest转移到mixedfs中实现
- Compression单测改造
- 修复大部分单测案例
- 修复全部单测案例
- Link支持不指定target_name
- 支持异步execute
- 修复execute无法捕获控制台输出的问题
- 优化字符解码逻辑顺序
- ExSemVer支持pre和build
- 添加semver官网比较案例
- 添加版本号位数错误案例
- Add arch field
- 执行工作流时校验arch
- 完善nep包版本兼容性判断
- 为wait增加break_if字段
- 上下文包含exit code
- 对过早退出的安装器调用进行警告
- 当setup调用call_installer时其他工作流也必须调用
- Meta入口支持本地安装的包名称
- 支持自动导出ts类型申明
- 优化工作流解析
- 移除KV结构体
- 支持PublicDesktop
- 对header中的if进行尝试执行校验
- 增加wait的校验
- 支持抛弃异步执行
- 初步拆分条件语句相关函数与header的耦合
- 使用宏改写eval functions
- 完善wait的校验和权限获取
- 结束时杀死被抛弃的异步执行
- 测试解除占用卸载的单测案例
- Todo&提升单测覆盖率
- 添加腐败包单测案例
- 提升单测覆盖率
- 优化步骤单测
- 拆分cli类型
- Add rusty hook
- 支持config命令
- 支持alias字段
- 支持tags重复校验
- 支持tags重复校验
- Install支持跳转至update
- 支持不指定name
- 支持 installed 字段
- 迁移独立的Interpretable特性
- 实现package解释
- Parse_package支持校验
- 合并installed和main_program
- 添加main_program校验逻辑及其单测
- 支持qa模式
- 支持环境变量Arch
- 支持直接使用内置变量
- 优化函数入参
- 支持对命令进行拆分
- Execute支持返回可执行文件作为manifest
- 封装copy_dir并初步支持安装开发目录时copy到临时目录
- 临时目录支持自动在结尾加随机字符串
- Add icon
- 支持外包重命名
- 启动时自动清理
- 添加registry_entry字段
- 卸载支持简单删除不完整的目录
- 增加安装失败的roll back提示
- 实现get_reg_entry
- 支持可能的静默命令
- 校验时必须提供 main_program 或是 registry_entry
- 实现registry_entry完整功能
- 增加RegEntry单测案例
- Log步骤支持省略level
- 支持在条件语句中对不正确的模板用法进行检查
- 支持在条件语句中对不正确的模板用法进行检查
- 支持struct解析脚本
- 支持可选tag
- 实现package.toml定义的初步自动生成
- 支持识别枚举值校验语句
- 支持示例代码注释
- 支持多行示例代码
- 增加software的文档注释
- 支持优化的换行符添加
- 检查name是否包含下划线
- 支持在自动生成的文件开头添加申明
- 抽象出代码块分割器
- 使用block抽象重写
- 初步支持内置变量定义生成
- 支持提供注释定义自动生成字段
- 支持demoValue字段
- 支持demoValue字段为数字，添加动态的内置变量
- 支持解析内置函数
- 支持上下文章节生成
- 将权限key改为枚举字符串
- 为PermissionsTest添加权限输出对比
- 支持权限生成
- 没有导入组件时使用md而不是mdx
- 分离tag样式
- 添加函数getCommentsInBlock
- 初步支持解析步骤
- 函数上的权限等级支持超链接
- 初步渲染步骤
- 支持渲染反向步骤
- 校验路径时补全开头
- 初步支持分割权限申明
- 支持解析注释定义文档
- 支持解析完全注释定义
- 支持解释分割结果
- 添加 md 超链接
- 更新类型
- 支持渲染权限
- 步骤间添加分割线
- 初步支持解析工作流字段信息
- 添加工作流wiki
- Execute中命令不能有反斜杠
- 支持3位版本号解析
- 添加 mirror add
- 添加update及utils
- Add mirror remove
- 支持校验 mirrorhello
- 支持基础的索引建立于搜索
- 支持遍历tree生成索引
- 支持序列化搜索结果
- 添加搜索入口
- 封装获取字段
- 添加版本号索引
- Add 时刷新索引
- Add filter release
- 实现version的序列化
- Add ut
- Meta 支持在线
- 简单支持下载
- 优化下载进度条
- Add mirror cli
- Add search cli
- Add pkg matcher
- Info支持matcher
- 支持deny
- Uninstall 支持 scope
- Install support url
- Update support url
- 封装nep下载
- 添加通过包匹配
- 添加校验
- 使用正则匹配enum
- 添加解析cli
- 完善安装和更新前检查
- Find scope online
- 添加update的版本号变化
- 安装前检查版本号
- 支持自动纠正大小写
- 取消按需清理
- 初始化时清理缓存
- Add mirror list
- 支持/结尾省略hello路径
- 编译时内联key
- Use codecov
- 打包前检查是否能正常读取主版本号
- 优化版本匹配时的提示
- 安装和更新前询问
- 提高快速解压内存上限
- 替换加号以解决无法下载带加号文件的问题
- 使用simple git hook统一管理
- 支持no warning模式
- 优化自动填充路径的逻辑
- 初步实现自动更新镜像
- 在路由中添加自动更新镜像
- 支持 mock server
- 添加普通操作单测
- 支持全量更新
- 改造 update 为统一的结构体
- 添加搜索单测
- 支持启动文件服务器
- 添加 vscode 的镜像源安装单测
- 添加在线更新单测
- 补全mv的单测
- 补全delete的单测
- 补全new的单测
- Log对齐打印
- 补全rename的单测
- 补全wait的单测
- 补全toast的单测
- 补全log的单测
- 补全link的单测
- 补全kill的单测
- 优化ask_yn的体验
- 重构ask_yn
- 约束染色和格式化到同一个文件
- 改造question的提示词渲染
- 整合包行打印
- 支持格式化镜像行
- 添加单测
- 封装改版本号逻辑
- 支持别名
- 支持更多alias
- 提升package单测
- 提升clean覆盖率
- 增加fork工具函数
- 添加PackageVersion
- 实现新的更新逻辑
- 添加更新时的工作流执行单测
- 添加作者不同时更新的单测
- 使用jieba分词器
- 优化分词体验
- 支持正则表达式搜索
- 初步添加安装和更新的解析器
- 初步改造install和update接收数组
- Uninstall 支持数组输入
- 使用 config 改造配置
- 重命名配置文件为eptrc
- *(execute)* 支持忽略错误
- 移除全局严格模式flag、默认全局模式、支持在包内显式申明严格模式
- 支持 vc-ltl
- 初步实现download、优化步骤校验提示
- 添加下载单测
- 重构步骤的校验方法
- 编译支持上传
- 添加download wiki
- 校验工作流时要求下载的目标不存在
- 初步支持国际化
- 添加翻译脚本
- 初步翻译几个文档
- 通过存储md5判断文档一致性
- 支持检查英文文档中是否存在中文
- 初步将步骤拆分
- 初步翻译步骤为英文
- 步骤不排序
- 支持中英文目录的一致性检查
- 校验装箱单支持展开工作流
- 支持不翻译，直接更新 md5
- 支持对单个工作目录展开
- Install 支持可展开包
- Update 支持可展开包
- 支持下载缓存
- 支持清理缓存和meta目录
- Cfg添加偏好表
- 支持flags打分排序
- 支持关闭flags打分
- 使用新的工具链接口
- 更新镜像时下载工具链
- 初步实现upgrade
- 可控制是否掐断以方便测试
- 添加upgrade到路由
- 抽离打印封装
- 支持主程序在退出前检查更新
- 没有镜像时不检查更新
- 添加upgrade单测
- 添加解析输入的单测
- Nep协议改为1位
- 替换envmnt为本地实现
- 去掉u64的支持
- 使用全局变量记录上次日志内容
- 使用重构的flags模块
- Meta 输出改为toml格式
- 去掉no warning
- 支持打印时超长省略
- 获取装箱单时支持去重
- 支持编译和修改二进制信息
- 完善发版脚本

### 🐛 Bug Fixes

- 更新Path语法规范
- 修复生产环境中运行遇到的两个问题
- 补上遗漏的Success
- 规范解包与打包用词
- 修复拼写错误
- 检查可能的Warning被覆盖情况
- 修复编译错误
- Ok日志支持自动识别上条内容-可用
- 修复一处不必要的拷贝
- 优化list命令
- 错误时将退出码置1
- 修复无版本号exe文件阻塞更新版本号导致无法info
- 修复缺失用户path注册表导致的操作path失败
- 允许确保scope存在
- 修复格式化错误
- 修复编译错误
- 修复模板字符串格式化错误
- 修复执行内置函数时的错误
- 将内置变量确定为模板字符串变量的形式处理
- 修复错误
- 修复通配符相关函数
- 修复copy问题
- 修复通配符处理逻辑，增加单测
- 如果 from 以 / 结尾但不是目录则报错
- 对located进行格式化
- 注册wait
- 修复警告错误
- 修复rename单测错误
- 修复细节
- 修复meta给出的工作流变成路径的问题
- 修复parse_relative_path函数、完善部分单测案例
- 修复全局测试错误&格式化
- 修复报警
- 修复控制台输出乱码的问题
- 修复display错误
- 修复单测问题
- 封装arch兼容逻辑
- 补全遗漏的枚举值校验
- 修复author相等判断逻辑
- 修复快速解压时目标空间不够的问题
- 修复nep包版本号输入 拼接错误
- 修复非规范样例
- 修复实现错误
- 禁止execute中出现:/
- 修复meta单测案例
- 修复单测
- 修复普通字段中if被替换的问题
- 修复qa无法识别到ept退出的问题
- 用到了 call_installer 必须有卸载流
- 增加目录被清除断言
- 修复单测bug
- 修复单测bug
- 修复if解析失效并添加单测
- 修复跨驱动器的临时目录无法正常安装或更新
- 修复测试config导致全局cfg覆盖的问题
- 修复被固定的system_drive
- 修复单测案例
- 修复单测案例
- 支持内置变量前面带引号
- 击杀主程序时解析文件名
- 修复读主程序版本号时没解释变量的问题
- 测试安装时应该复制到test
- 修复复制参数错误
- 外包不再检查签名文件
- 修复当桌面为smb地址时单测失败
- 修复当前目录下没有config.toml时单测无法通过的问题
- 修复直接绝对路径无法执行
- 加引号前判断两边是否有引号
- 修复没有test目录时的压缩类单测失败
- 修复没有启动code时test_is_alive_with_name失败
- 修复actions中单测失败
- Fix warning
- 更新单测案例
- 修复示例中的license拼写错误
- 修复单测案例
- 修复校验工作流时不支持直接使用内置变量
- 修复测试目录
- 添加递归标记并修复问题
- 修复编译错误
- 补充内置变量的权限信息
- 修复id大小写错误
- 修复生产模式下首次运行时尝试删除不存在的临时目录
- 替换仓库镜像源
- 对从reg入口获取的卸载命令转换反斜杠
- Add pnpm installer
- 安装tarpaulin
- 更新步骤
- Name
- Tarpaulin
- 修复 version req 正则不完整
- 修复读主程序时未替换内置变量、list时忽略非法目录
- 修复单测问题
- 修复clippy错误
- 修复clippy问题
- 修复进阶clippy问题
- 修复直接安装路径包时匹配出错
- 修复QA模式下不自带确认模式导致卡住的问题
- 阻止反向更新版本号
- 修复无法相对路径 rename
- 修复逻辑错误
- 修复特性未引入
- 修复组件没有默认导出
- 修复单测错误
- 工作流中添加安装 miniserve
- Warning
- 修复失效的断言
- 修复list时未检查版本号更新的问题
- 修复自动删除后单测不通过
- 修复cmd窗口无法正常显示颜色
- 修复单测问题
- 修复编译错误
- 修复单测问题
- 提升单测可靠性
- 修复示例错误
- 修复问题
- 修复单测出错
- 注释掉错误逻辑断言
- 修复单测问题
- 修复wt下black字体看不见
- 修复安装前的提示语打印格式问题
- Clippy warning
- 不使用正则表达式替换条件语句
- 修复pnpm未安装
- 修复npm命令错误
- 支持忽略属性宏
- 修复上传文件名错误
- 修复步骤解析出错时panic
- 修复单测错误
- 修复mdx没有被翻译的问题
- 修复mdx没有被翻译的问题
- 国际化走查
- 修复检查需要配置
- 修复英文没有使用国际化key
- 修复在 Windows 端路径变成反斜杠的问题
- 修复恢复缓存后仍会下载
- 修复单测问题
- 重新实现序列化
- 修复set_config不更新配置单例的问题
- 修复导入错误
- 修复更新异常
- 修复单测
- 修复例子被报装箱单缺失
- 修复单测
- 修复干运行提示逻辑错误

### 🚜 Refactor

- 换用evalexpr

### 📚 Documentation

- 增加环境隔离提示
- 增加单测覆盖率命令
- Init
- 修复文档无法编译的问题
- 修复文档无法编译的问题
- 完成文档基础结构
- Add solved
- Add struct
- Add ability
- 添加部分工作流文档
- 调整内置变量表达
- Add something
- Add exsemver
- 优化文案
- 优化文案细节
- 初步添加步骤文档注释
- Add steps demo
- 添加枚举注释
- 添加校验规则
- 渲染装箱单
- 添加 scene 注释
- 添加完全注释定义的权限信息
- Add permissions
- 优化文档
- 增加 exitcode 说明
- 修复无权限被渲染成一级标题
- 改成简体字
- 更新文档
- Update doc
- Update introduction
- Update readme
- 更换清晰的表达
- Update
- 翻译遗漏的注释
- 删除额外的标识
- 去除英文文档中的中文
- 折叠步骤组、优化代码块的翻译表现
- 补齐反斜杠
- 移动步骤通用字段
- 完善步骤通用字段
- 去掉步骤超链接
- 校对
- 校对文档
- 提示注意关闭严格模式
- 添加展开工作流的名称
- 完善nep版本号注释
- 修复错误
- 增加执行步骤的超链接
- 解释压缩后大小

<!-- generated by git-cliff -->
