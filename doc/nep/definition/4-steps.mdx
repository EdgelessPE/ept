# 步骤

[//]: # (This file is automatically generated by script, do not modify it.)

import { Tag } from "../../components/tag.tsx"
 
通过步骤组成工作流完成指定操作。 
## Copy
复制文件/文件夹。
### 字段
#### from
源路径，支持相对路径和绝对路径，支持使用通配符。
* 类型：`String`  
* 示例：
  ```toml
  # 相对路径写法
  from = "./examples/config.toml"
  
  # 绝对路径通配符写法
  from = "${SystemDrive}/Windows/system32/*.dll"
  ``` 
* 校验规则：
  * 是合法路径
  * 符合通配符用法
#### to
目标路径，支持相对路径和绝对路径。
* 类型：`String`  
* 示例：`to = "./config"` 
* 校验规则：
  * 是合法路径
  * 不包含通配符
#### overwrite
<Tag>可选</Tag> 是否覆盖，缺省为 `false`。
* 类型：`bool`  
* 示例：`overwrite = true`  
## Delete
删除文件/文件夹。
### 字段
#### at
删除目标路径，支持相对路径和绝对路径，支持使用通配符。
* 类型：`String`  
* 示例：
  ```toml
  # 相对路径写法
  at = "./eula.txt"
  
  # 绝对路径通配符写法
  at = "${AppData}/vscode/*.txt"
  ``` 
* 校验规则：
  * 是合法路径
  * 符合通配符用法
#### force
<Tag>可选</Tag> 是否强制删除，缺省为 `false`。
* 类型：`bool`  
* 示例：`force = "true"`  
## Execute
执行自定义命令
### 字段
#### command
需要执行的命令，使用终端为 cmd。
* 类型：`String`  
* 示例：`command = "./installer.exe /S"` 
* 校验规则：
  * 是有效的 POSIX 命令
  * 不得出现绝对路径（使用[内置变量](/nep/workflow/2-context.html#内置变量)）
#### pwd
<Tag>可选</Tag> 执行目录，缺省为包安装目录。
* 类型：`String`  
* 示例：`pwd = "${AppData}/Microsoft"` 
* 校验规则：
  * 是合法路径
#### call_installer
<Tag>可选</Tag> 当前命令的语义是否为正在调用安装器，缺省为 `false`；请务必正确指定此项，因为这会影响包权限、工作流静态检查等行为。
* 类型：`bool`  
* 示例：`call_installer = true` 
#### wait
<Tag>可选</Tag> 命令等待策略。

`Sync`：同步等待命令执行完成后该步骤才会结束；

`Delay`：异步执行命令并立即完成当前步骤；在当前工作流执行完成时等待该命令执行结束，然后才会结束工作流；

`Abandon`：异步执行命令并立即完成当前步骤；在当前工作流执行完成时若此命令还未结束则直接强行停止此命令。
* 类型：`String 枚举` 
* 有效值：`Sync` `Delay` `Abandon` ，缺省值：`Sync` 
* 示例：`wait = "Delay"`  
### 装箱单
* 若命令调用相对路径的安装包，则该安装包进入装箱单
## Kill
杀死某个进程。
### 字段
#### target
进程名称，注意大小写敏感。
* 类型：`String`  
* 示例：`target = "code.exe"` 
* 校验规则：
  * 以 `.exe` 结尾 
## Link
创建快捷方式。
### 字段
#### source_file
源文件路径，支持相对路径和绝对路径。
* 类型：`String`  
* 示例：`source_file = "code.exe"` 
* 校验规则：
  * 是合法路径
#### target_name
<Tag>可选</Tag> 快捷方式名称，支持使用 `FOLDER/NAME` 的模式表示在创建位置的文件夾中放置快捷方式。
* 类型：`String`  
* 示例：
  ```toml
  # 创建快捷方式
  target_name = "Visual Studio Code"
  
  # 在文件夹中创建快捷方式
  target_name = "Microsoft/Visual Studio Code"
  ``` 
* 校验规则：
  * 符合模式 `NAME` 或 `FOLDER/NAME`
  * 不包含 `..`
  * 不以 `.lnk` 结尾
#### target_args
<Tag>可选</Tag> 快捷方式的启动参数。
* 类型：`String`  
* 示例：`target_args = "--debug"` 
#### target_icon
<Tag>可选</Tag> 快捷方式图标。
* 类型：`String`  
* 示例：`target_icon = "./icons/code.ico"` 
#### at
<Tag>可选</Tag> 创建位置。
* 类型：`Vec<String 枚举>` 
* 元素有效值：`Desktop` `StartMenu` ，缺省值：`["Desktop"]` 
* 示例：`at = ["Desktop", "StartMenu"]`  
### 反向步骤
删除生成的快捷方式。
### 装箱单
* 若 `source_file` 指向一个相对路径，则该路径进入装箱单
## Log
打印日志。
### 字段
#### msg
日志内容。
* 类型：`String`  
* 示例：`msg = "VSCode installed successfully, workflow exit."` 
#### level
<Tag>可选</Tag> 日志级别。
* 类型：`String 枚举` 
* 有效值：`Debug` `Info` `Warning` `Error` `Success` ，缺省值：`Info` 
* 示例：`level = "Success"`  
## Move
移动文件/文件夹。
### 字段
#### from
源路径，支持相对路径和绝对路径，支持使用通配符。
* 类型：`String`  
* 示例：
  ```toml
  # 相对路径写法
  from = "./runtime/lib.dll"
  
  # 绝对路径通配符写法
  from = "${Desktop}/Visual Studio Code.lnk"
  ``` 
* 校验规则：
  * 是合法路径
  * 符合通配符用法
#### to
目标路径，支持相对路径和绝对路径。
* 类型：`String`  
* 示例：`to = "./bin"` 
* 校验规则：
  * 是合法路径
  * 不包含通配符
#### overwrite
<Tag>可选</Tag> 是否覆盖，缺省为 `false`。
* 类型：`bool`  
* 示例：`overwrite = "true"`  
## New
新建文件/文件夹。
### 字段
#### at
新建位置，以 `/` 结尾表示新建一个文件夹。
* 类型：`String`  
* 示例：
  ```toml
  # 创建空文件
  at = "./empty.txt"
  
  # 创建文件夹
  at = "${Desktop}/Microsoft/"
  ``` 
* 校验规则：
  * 是合法路径
  * 不包含通配符
#### overwrite
<Tag>可选</Tag> 是否覆盖，缺省为 false。
* 类型：`bool`  
* 示例：`overwrite = "true"`  
## Path
将可执行文件/文件夹暴露到 PATH 中：
若指定一个可执行文件，则会在统一管理的 bin 目录中创建一个入口；
若指定一个文件夹，则会将其添加到 PATH 变量中。
### 字段
#### record
记录值，支持可执行文件/文件夾，支持相对路径和绝对路径。
* 类型：`String`  
* 示例：
  ```toml
  # 创建可执行文件入口
  record = "visual-studio-code.exe"
  
  # 添加文件夹到 PATH 变量
  record = "./bin"
  ``` 
* 校验规则：
  * 是合法路径
#### alias
<Tag>可选</Tag> 别名，仅对可执行文件生效，缺省为原文件名。
* 类型：`String`  
* 示例：`alias = "code.exe"`  
### 反向步骤
删除生成的可执行文件入口或从 PATH 变量中移除目录。
### 装箱单
* 若 `record` 指向一个相对路径，则该路径进入装箱单
## Rename
重命名文件/文件夹。
### 字段
#### from
目标路径，支持相对路径和绝对路径。
* 类型：`String`  
* 示例：`from = "./config.toml.example"` 
* 校验规则：
  * 是合法路径
  * 不包含通配符
#### to
新的名称。
* 类型：`String`  
* 示例：`to = "config.toml"` 
* 校验规则：
  * 是合法的文件名或文件夹名而非路径 
## Toast
弹出消息通知。
### 字段
#### title
消息标题。
* 类型：`String`  
* 示例：`title = "你好 Nep"` 
#### content
消息内容。
* 类型：`String`  
* 示例：`content = "Hello Nep"`  
## Wait
等待一个指定的时间。
### 字段
#### timeout
等待的时长，单位为 ms。
* 类型：`u64`  
* 示例：`timeout = "3000"` 
* 校验规则：
  * 不超过 30min（1800000ms）
#### break_if
<Tag>可选</Tag> 若满足指定条件则提前结束等待，该条件会在等待过程中每 500ms 检查一次。
* 类型：`String`  
* 示例：`break_if = 'Exist("${Desktop}/Visual Studio Code.lnk")'` 
* 校验规则：
  * 是合法的条件 