# 上下文

[//]: # (This file is automatically generated by script, do not modify it.)
 
提供在工作流执行过程中可用的上下文信息，例如内置变量和内置函数。 
## 内置变量
步骤字段中可用的内置变量。注意在非条件字段中使用时需要使用模板写法，详见[内置变量](/nep/workflow/2-context.html#内置变量)。

“权限等级”字段表示该内置变量对应路径在访问时所需要的[权限](/nep/ability/1-permission)等级。
### ExitCode
上一步骤的退出码，**类型为整数**。
* 权限等级：[`Normal`](/nep/definition/3-permissions#normal)
* 示例值：`0` 
* 示例：
    ```toml
    # 条件字段中使用
    if = 'ExitCode==0'
    ```
### DefaultLocation
当前包的默认安装位置
* 权限等级：[`Normal`](/nep/definition/3-permissions#normal)
* 示例值：`C:/Users/UserName/ept/Microsoft/VSCode` 
* 示例：
    ```toml
    # 非条件字段中使用
    to = "${DefaultLocation}/config"

    # 条件字段中使用
    if = 'DefaultLocation=="C:/Users/UserName/ept/Microsoft/VSCode"'
    ```
### SystemDrive
系统盘符
* 权限等级：[`Sensitive`](/nep/definition/3-permissions#sensitive)
* 示例值：`C:` 
* 示例：
    ```toml
    # 非条件字段中使用
    to = "${SystemDrive}/Windows/system32"

    # 条件字段中使用
    if = 'SystemDrive=="C:"'
    ```
### Home
用户主目录
* 权限等级：[`Important`](/nep/definition/3-permissions#important)
* 示例值：`C:/Users/UserName` 
* 示例：
    ```toml
    # 非条件字段中使用
    to = "${Home}/Document"

    # 条件字段中使用
    if = 'Home=="C:/Users/UserName"'
    ```
### AppData
应用数据目录

:::warning
注意：此变量和 Windows 系统内的 `%appdata%` 变量表示的目录位置不同，其不会自动在末尾加上`Roaming`
:::
* 权限等级：[`Sensitive`](/nep/definition/3-permissions#sensitive)
* 示例值：`C:/Users/UserName/AppData` 
* 示例：
    ```toml
    # 非条件字段中使用
    to = "${AppData}/Roaming/Microsoft/Windows/Start Menu"

    # 条件字段中使用
    if = 'AppData=="C:/Users/UserName/AppData"'
    ```
### ProgramFiles_X64
ProgramFiles 目录
* 权限等级：[`Sensitive`](/nep/definition/3-permissions#sensitive)
* 示例值：`C:/Program Files` 
* 示例：
    ```toml
    # 非条件字段中使用
    to = "${ProgramFiles_X64}/Microsoft/Windows"

    # 条件字段中使用
    if = 'ProgramFiles_X64=="C:/Program Files"'
    ```
### ProgramFiles_X86
ProgramFiles (x86) 目录
* 权限等级：[`Sensitive`](/nep/definition/3-permissions#sensitive)
* 示例值：`C:/Program Files (x86)` 
* 示例：
    ```toml
    # 非条件字段中使用
    to = "${ProgramFiles_X86}/Microsoft"

    # 条件字段中使用
    if = 'ProgramFiles_X86=="C:/Program Files (x86)"'
    ```
### Desktop
当前用户桌面目录
* 权限等级：[`Important`](/nep/definition/3-permissions#important)
* 示例值：`C:/Users/UserName/Desktop` 
* 示例：
    ```toml
    # 非条件字段中使用
    to = "${Desktop}"

    # 条件字段中使用
    if = 'Desktop=="C:/Users/UserName/Desktop"'
    ```
### PublicDesktop
公用桌面目录
* 权限等级：[`Important`](/nep/definition/3-permissions#important)
* 示例值：`C:/Users/Public/Desktop` 
* 示例：
    ```toml
    # 非条件字段中使用
    to = "${PublicDesktop}"

    # 条件字段中使用
    if = 'PublicDesktop=="C:/Users/Public/Desktop"'
    ```
### Arch
运行时系统架构，可能的值：`X64` `X86` `ARM64`
* 权限等级：[`Normal`](/nep/definition/3-permissions#normal)
* 示例值：`X64` 
* 示例：
    ```toml
    # 条件字段中使用
    if = 'Arch=="X64"'
    ```

## 内置函数
步骤的条件语句可用的内置变量。当前版本提供的内置变量都是输入为`String`输出为`Bool`的简单函数。
### Exist
检查某个路径指向的文件或目录是否存在
* 入参校验：需要输入合法的路径
* 示例：``if = 'Exist("${SystemDrive}/Windows")'``
* 权限：
  * 类型：[`fs_read`](/nep/definition/3-permissions#fs_read)
  * 等级：根据输入路径决定
### IsAlive
检查某个进程是否正在运行
* 入参校验：需要以 `.exe` 结尾
* 示例：``if = 'IsAlive("code.exe")'``
* 权限：
  * 类型：[`process_query`](/nep/definition/3-permissions#process_query)
  * 等级：`Normal`
### IsDirectory
检查某个路径是否指向一个目录
* 入参校验：需要输入合法的路径
* 示例：``if = 'IsDirectory("${SystemDrive}/Windows")'``
* 权限：
  * 类型：[`fs_read`](/nep/definition/3-permissions#fs_read)
  * 等级：根据输入路径决定
### IsInstalled
检查某个包是否已被 ept 安装
* 入参校验：需要匹配模式 'SCOPE/NAME'
* 示例：``if = 'IsInstalled("Microsoft/VSCode")'``
* 权限：
  * 类型：[`nep_installed`](/nep/definition/3-permissions#nep_installed)
  * 等级：`Normal`